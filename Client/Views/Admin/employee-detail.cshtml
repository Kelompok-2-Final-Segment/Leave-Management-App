@using Client.Models;

@model EmployeeCombinedModel
@{
    ViewData["Title"] = "Employee Detail - Admin";
    Layout = "~/Views/Shared/_LayoutDashboardAdmin.cshtml";
}

<div class="row mt-4">
    <div class="col-lg-4 mb-lg-0 mb-4">
        <div class="card ">
            <div class="card-header pb-0 p-3">
                <div class="d-flex justify-content-between">
                    <h4 class="mb-2">Employee Detail</h4>
                </div>
            </div>
            <div class="table-responsive px-3">
                <form method="post" asp-action="CreateEmployee" id="form-registration">
                    <div class="mb-3">
                        <label for="input-birthdate" class="form-label">FULL NAME</label>
                        <input type="text" id="input-firstname" class="form-control" placeholder="FIRST NAME" aria-label="First name" value="@Model.EmployeeDetail.FullName">
                    </div>
                    <div class="mb-3">
                        <label for="input-birthdate" class="form-label">BIRTHDATE</label>
                        <input type="date" class="form-control" id="input-birthdate" placeholder="BIRTHDATE" value="">
                    </div>
                    <div class="mb-3">
                        <label for="input-hiring-date" class="form-label">HIRING DATE</label>
                        <input type="date" class="form-control" id="input-hiring-date" placeholder="HIRING DATE">
                    </div>
                    <div class="mb-3">
                        <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="select-gender">
                            <option>Select Gender</option>
                            <option value="1">Male</option>
                            <option value="0">Female</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <input type="email" class="form-control" id="input-email" placeholder="EMAIL ADDRESS" value="@Model.EmployeeDetail.Email">
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" id="input-phone-number" placeholder="PHONE NUMBER" value="@Model.EmployeeDetail.PhoneNumber">
                    </div>
                    <div class="mb-3">
                        <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="select-role">
                            <option>Select Role</option>
                            <option value="Staff">Staff</option>
                            <option value="Manager">Manager</option>
                            <option value="Admin">Administrator / HR</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <select class="form-select form-select-sm" aria-label=".form-select-sm example" id="select-department">
                            <option>Select Department</option>
                            <option value="Sales and Marketing">Sales and Marketing</option>
                            <option value="HR">Human Resources</option>
                            <option value="IT">Information Technology</option>
                            <option value="Finance">Finance</option>
                            <option value="Customer Support">Customer Support</option>
                        </select>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="col-lg">
        <div class="card">
            <div class="card-header pb-0 p-3">
                <h4 class="mb-0">Employee Leave Records</h4>
            </div>
            <div class="card-body p-3">
                <ul class="list-group">
                    <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
                        <div class="d-flex align-items-center">
                            <div class="icon icon-shape icon-sm me-3 bg-gradient-dark shadow text-center">
                                <i class="ni ni-mobile-button text-white opacity-10"></i>
                            </div>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1 text-dark text-sm">Devices</h6>
                                <span class="text-xs">250 in stock, <span class="font-weight-bold">346+ sold</span></span>
                            </div>
                        </div>
                        <div class="d-flex">
                            <button class="btn btn-link btn-icon-only btn-rounded btn-sm text-dark icon-move-right my-auto"><i class="ni ni-bold-right" aria-hidden="true"></i></button>
                        </div>
                    </li>
                    <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
                        <div class="d-flex align-items-center">
                            <div class="icon icon-shape icon-sm me-3 bg-gradient-dark shadow text-center">
                                <i class="ni ni-tag text-white opacity-10"></i>
                            </div>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1 text-dark text-sm">Tickets</h6>
                                <span class="text-xs">123 closed, <span class="font-weight-bold">15 open</span></span>
                            </div>
                        </div>
                        <div class="d-flex">
                            <button class="btn btn-link btn-icon-only btn-rounded btn-sm text-dark icon-move-right my-auto"><i class="ni ni-bold-right" aria-hidden="true"></i></button>
                        </div>
                    </li>
                    <li class="list-group-item border-0 d-flex justify-content-between ps-0 mb-2 border-radius-lg">
                        <div class="d-flex align-items-center">
                            <div class="icon icon-shape icon-sm me-3 bg-gradient-dark shadow text-center">
                                <i class="ni ni-box-2 text-white opacity-10"></i>
                            </div>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1 text-dark text-sm">Error logs</h6>
                                <span class="text-xs">1 is active, <span class="font-weight-bold">40 closed</span></span>
                            </div>
                        </div>
                        <div class="d-flex">
                            <button class="btn btn-link btn-icon-only btn-rounded btn-sm text-dark icon-move-right my-auto"><i class="ni ni-bold-right" aria-hidden="true"></i></button>
                        </div>
                    </li>
                    <li class="list-group-item border-0 d-flex justify-content-between ps-0 border-radius-lg">
                        <div class="d-flex align-items-center">
                            <div class="icon icon-shape icon-sm me-3 bg-gradient-dark shadow text-center">
                                <i class="ni ni-satisfied text-white opacity-10"></i>
                            </div>
                            <div class="d-flex flex-column">
                                <h6 class="mb-1 text-dark text-sm">Happy users</h6>
                                <span class="text-xs font-weight-bold">+ 430</span>
                            </div>
                        </div>
                        <div class="d-flex">
                            <button class="btn btn-link btn-icon-only btn-rounded btn-sm text-dark icon-move-right my-auto"><i class="ni ni-bold-right" aria-hidden="true"></i></button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script>
        $("#select-role").val("@Model.EmployeeDetail.RoleName").change();
        $("#select-department").val("@Model.EmployeeDetail.DepartmentName").change();

        let gender = "@Model.EmployeeDetail.Gender" === "Female" ? "0" : "1";
        $("#select-gender").val(gender).change();

        $("#input-birthdate").attr('value', toDateHTML("@Model.EmployeeDetail.BirthDate"));
        $("#input-hiring-date").attr('value', toDateHTML("@Model.EmployeeDetail.HiringDate"));

        function toDateHTML(date) { 
            let splitBySpace = date.split(' ');
            let originalDate = splitBySpace[0];
            let parts = originalDate.split('/');
            return `${parts[02]}-${addZero(parts[0])}-${addZero(parts[1])}`;
        }

        function addZero(obj) {
            return obj.length == 1 ? "0" + obj : obj;
        }

    </script>
}